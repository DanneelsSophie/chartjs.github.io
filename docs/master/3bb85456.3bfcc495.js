(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{143:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=a.a.createContext({}),p=function(e){var t=a.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=p(e.components);return a.a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},b=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(n),b=r,h=d["".concat(l,".").concat(b)]||d[b]||u[b]||o;return n?a.a.createElement(h,i(i({ref:t},c),{},{components:n})):a.a.createElement(h,i({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=b;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var c=2;c<o;c++)l[c]=n[c];return a.a.createElement.apply(null,l)}return a.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"},96:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return i})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return p}));var r=n(3),a=n(7),o=(n(0),n(143)),l={title:"New Charts"},i={unversionedId:"developers/charts",id:"developers/charts",isDocsHomePage:!1,title:"New Charts",description:"Chart.js 2.0 introduced the concept of controllers for each dataset. Like scales, new controllers can be written as needed.",source:"@site/docs/developers/charts.md",slug:"/developers/charts",permalink:"/docs/master/developers/charts",editUrl:"https://github.com/chartjs/Chart.js/edit/master/docs/docs/developers/charts.md",version:"current",sidebar:"someSidebar",previous:{title:"Plugins",permalink:"/docs/master/developers/plugins"},next:{title:"New Axes",permalink:"/docs/master/developers/axes"}},s=[{value:"Dataset Controller Interface",id:"dataset-controller-interface",children:[]},{value:"Extending Existing Chart Types",id:"extending-existing-chart-types",children:[]},{value:"TypeScript Typings",id:"typescript-typings",children:[]}],c={toc:s};function p(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Chart.js 2.0 introduced the concept of controllers for each dataset. Like scales, new controllers can be written as needed."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),"class MyType extends Chart.DatasetController {\n\n}\n\nChart.register(MyType);\n\n// Now we can create a new instance of our chart, using the Chart.js API\nnew Chart(ctx, {\n    // this is the string the constructor was registered at, ie Chart.controllers.MyType\n    type: 'MyType',\n    data: data,\n    options: options\n});\n")),Object(o.b)("h2",{id:"dataset-controller-interface"},"Dataset Controller Interface"),Object(o.b)("p",null,"Dataset controllers must implement the following interface."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),"{\n    // Defaults for charts of this type\n    defaults: {\n        // If set to `false` or `null`, no dataset level element is created.\n        // If set to a string, this is the type of element to create for the dataset.\n        // For example, a line create needs to create a line element so this is the string 'line'\n        datasetElementType: string | null | false,\n\n        // If set to `false` or `null`, no elements are created for each data value.\n        // If set to a string, this is the type of element to create for each data value.\n        // For example, a line create needs to create a point element so this is the string 'point'\n        dataElementType: string | null | false,\n    }\n\n    // ID of the controller\n    id: string;\n\n    // Update the elements in response to new data\n    // @param mode : update mode, core calls this method using any of `'active'`, `'hide'`, `'reset'`, `'resize'`, `'show'` or `undefined`\n    update: function(mode) {}\n}\n")),Object(o.b)("p",null,"The following methods may optionally be overridden by derived dataset controllers."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),"{\n    // Draw the representation of the dataset. The base implementation works in most cases, and an example of a derived version\n    // can be found in the line controller\n    draw: function() {},\n\n    // Initializes the controller\n    initialize: function() {},\n\n    // Ensures that the dataset represented by this controller is linked to a scale. Overridden to helpers.noop in the polar area and doughnut controllers as these\n    // chart types using a single scale\n    linkScales: function() {},\n\n    // Parse the data into the controller meta data. The default implementation will work for cartesian parsing, but an example of an overridden\n    // version can be found in the doughnut controller\n    parse: function(start, count) {},\n}\n")),Object(o.b)("h2",{id:"extending-existing-chart-types"},"Extending Existing Chart Types"),Object(o.b)("p",null,"Extending or replacing an existing controller type is easy. Simply replace the constructor for one of the built in types with your own."),Object(o.b)("p",null,"The built in controller types are:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"BarController")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"BubbleController")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"DoughnutController")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"LineController")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"PieController")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"PolarAreaController")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"RadarController")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"ScatterController"))),Object(o.b)("p",null,"These controllers are also available in the UMD package, directly under ",Object(o.b)("inlineCode",{parentName:"p"},"Chart"),". Eg: ",Object(o.b)("inlineCode",{parentName:"p"},"Chart.BarController"),"."),Object(o.b)("p",null,"For example, to derive a new chart type that extends from a bubble chart, you would do the following."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),"import {BubbleController} from 'chart.js';\nclass Custom extends BubbleController {\n    draw() {\n        // Call bubble controller method to draw all the points\n        super.draw(arguments);\n\n        // Now we can do some custom drawing for this dataset. Here we'll draw a red box around the first point in each dataset\n        const meta = this.getMeta();\n        const pt0 = meta.data[0];\n\n        const {x, y} = pt0.getProps(['x', 'y']);\n        const {radius} = pt0.options;\n\n        const ctx = this.chart.ctx;\n        ctx.save();\n        ctx.strokeStyle = 'red';\n        ctx.lineWidth = 1;\n        ctx.strokeRect(x - radius, y - radius, 2 * radius, 2 * radius);\n        ctx.restore();\n    }\n});\nCustom.id = 'derivedBubble';\nCustom.defaults = BubbleController.defaults;\n\n// Stores the controller so that the chart initialization routine can look it up\nChart.register(Custom);\n\n// Now we can create and use our new chart type\nnew Chart(ctx, {\n    type: 'derivedBubble',\n    data: data,\n    options: options\n});\n")),Object(o.b)("h2",{id:"typescript-typings"},"TypeScript Typings"),Object(o.b)("p",null,"If you want your new chart type to be statically typed, you must provide a ",Object(o.b)("inlineCode",{parentName:"p"},".d.ts"),' TypeScript declaration file. Chart.js provides a way to augment built-in types with user-defined ones, by using the concept of "declaration merging".'),Object(o.b)("p",null,"When adding a new chart type, ",Object(o.b)("inlineCode",{parentName:"p"},"ChartTypeRegistry")," must contains the declarations for the new type, either by extending an existing entry in ",Object(o.b)("inlineCode",{parentName:"p"},"ChartTypeRegistry")," or by creating a new one."),Object(o.b)("p",null,"For example, to provide typings for a new chart type that extends from a bubble chart, you would add a ",Object(o.b)("inlineCode",{parentName:"p"},".d.ts")," containing:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-ts"}),"import { ChartTypeRegistry } from 'chart.js'\n\ndeclare module 'chart.js' {\n    interface ChartTypeRegistry {\n        derivedBubble: ChartTypeRegistry['bubble']\n    }\n}\n")))}p.isMDXComponent=!0}}]);